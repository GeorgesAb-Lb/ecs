{% extends 'shell.html' %}

{% load version_tag %}

{% block htmlbody %}
<div id="container">

	  <div id="header">
      {% block header %}
        <h1 id="headertitle">{% block headertitle %}{% endblock %}</h1>
        <div id="headernav">
          {% block headernav %}
          {% endblock %}
        </div>
          {% block header_actions %}
          {% endblock %}
      {% endblock %}
	  </div>

    <div id="content">
      <div class="innerwrap">
      
        {% block content_prefix %}
        {% endblock %}
      
	    {% block content %}
	    {% endblock %}
        
        {% block content_postfix %}
        {% endblock %}

      </div>
    </div>

  <span id="toggle_sidebar_button"><a href="#" id="toggle_sidebar" class="toggle_sidebar" title="Sidebar verstecken/wiederherstellen">toggle</a></span>
    
    <div id="sidebar">
        {% block sidebar %}
            <div id="logo">
                {% block logo %}
                    <img src="{{ MEDIA_URL }}/images/logo.png" alt="EC- Meduni Wien"/>
                    <small>{% current_version %}</small>
                {% endblock %}
            </div>
            <div id="account">
                {% block account %}
                {% endblock %}	        
            </div>
            <div id="usertoolbar">
                {% block usertoolbar %}
                {% endblock %}
            </div>
            <div id="usermenu">
                {% block usermenu %}
                {% endblock %}
            </div>
        {% endblock %}
    </div>
    
    <div id="footer">
        {% block footer %}
        {% endblock footer %}
    </div>
  
</div>
{% endblock %}

{% block jsbottom %}
  {{ block.super }}
  <script type="text/javascript">
    /* http://stackoverflow.com/questions/14267457 */  
    String.prototype.contains = function(string, separator){
    return (separator) ? (separator + this + separator).indexOf(separator + string + separator) > -1 : String(this).indexOf(string) > -1;
    };
    
    window.addEvent('domready', function() {
        var sidebar = $('sidebar');
        var header = $('header');
        var content = $('content');
        sidebar.set('morph', {duration: 'short', transition: Fx.Transitions.Sine.easeOut});
        header.set('morph', {duration: 'short', transition: Fx.Transitions.Sine.easeOut});
        content.set('morph', {duration: 'short', transition: Fx.Transitions.Sine.easeOut});
        $('toggle_sidebar').addEvent('click', function() {
            if (sidebar.getStyle('width') == '0px') {
                sidebar.morph({width: '220px'});
                header.morph({right: '220px'});
                content.morph({right: '220px'});
            } else {
                sidebar.morph({width: '0px'});
                header.morph({right: '0px'});
                content.morph({right: '0px'});
            }
            return false;
        });
    });
  </script>
{% endblock %}


