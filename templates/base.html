{% extends 'shell.html' %}
{% load version_tag staticfiles %}

{% block htmlbody %}
<div id="container">
    <div id="header">
      {% block header %}
        <h1 id="headertitle">{% block headertitle %}{% endblock %}</h1>
        <div id="headernav">
          {% block headernav %}
          {% endblock %}
        </div>
          {% block header_actions %}
          {% endblock %}
      {% endblock %}
    </div>

    <div id="content">
        <div class="innerwrap">
            {% block content %}
            {% endblock %}
        </div>
    </div>

</div>

<div id="sidebar">
    {% block sidebar %}
        <div id="logo">
            {% block logo %}
                <img src={% static 'images/logo.png' %} alt="EC- Meduni Wien"/>
                <small>{% current_version %}</small>
            {% endblock %}
        </div>
        <div id="account">
            {% block account %}
            {% endblock %}
        </div>
        <div id="usertoolbar">
            {% block usertoolbar %}
            {% endblock %}
        </div>
        <div id="usermenu">
            {% block usermenu %}
            {% endblock %}
        </div>
    {% endblock %}
</div>
<span id="toggle_sidebar_button">
    <a href="#" id="toggle_sidebar" class="toggle_sidebar" title="Sidebar verstecken/wiederherstellen">toggle</a>
</span>

{% endblock %}

{% block jsbottom %}
    {{ block.super }}
    <script type="text/javascript">
        /* http://stackoverflow.com/questions/14267457 */
        String.prototype.contains = function(string, separator){
        return (separator) ? (separator + this + separator).indexOf(separator + string + separator) > -1 : String(this).indexOf(string) > -1;
        };

        jQuery(function() {
            var sidebar = jQuery('#sidebar');
            var container = jQuery('#container');
            var duration = 150; /* ms */

            jQuery('#toggle_sidebar').click(function(ev) {
                ev.preventDefault();
                var width = sidebar.width() ? '0px' : '220px';
                sidebar.animate({width: width}, duration);
                container.animate({right: width}, duration);
            });
        });
    </script>
{% endblock %}
