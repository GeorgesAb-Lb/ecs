{% load core i18n %}
<div class="task_back_log">
    <table>
        <tr>
            <th>{% trans "Created At" %}</th>
            <th>{% trans "Activity" %}</th>
            <th>{% trans "Group" %}</th>
            <th>{% trans "Assigend At" %}</th>
            <th>{% trans "Assigend To" %}</th>
            <th>{% trans "Closed At" %}</th>
        </tr>
    {% for task in tasks %}
        <tr class="task{% if task.closed_at %} closed{% endif %}{% if task.deleted_at %} deleted{% endif %}">
            <td>{{ task.created_at|date:'d.m.Y H:i' }}</td>
            <td>{{ task.task_type }} {% if task.medical_categories.exists %}[{% for cat in task.medical_categories.all %}{{ cat }}{% if not forloop.last %}, {% endif %}{% endfor %}]{% endif %}</td>
            <td>{% for group in task.task_type.groups.all %}{{ group }}{% if not forloop.last %}, {% endif %}{% endfor %}</td>
            <td>{% if task.assigned_at %}{{ task.assigned_at|date:'d.m.Y H:i' }}{% else %}-{% endif %}</td>
            <td>
                {% if task.assigned_to %}
                    {{ task.assigned_to }}
                    {% if not task.accepted %}
                        <span class="fa fa-exclamation text-info" title="{% trans 'assigned' %}"></span>
                    {% endif %}
                {% else %}-{% endif %}
            </td>
            <td>{% if task.closed_at %}{{ task.closed_at|date:'d.m.Y H:i' }}{% else %}-{% endif %}</td>
        </tr>
    {% endfor %}
    </table>

    <p>
        <span class="fa fa-info text-info"></span>
        {% trans "Closed tasks are grayed out. Deleted tasks are crossed out." %}
    </p>
</div>
