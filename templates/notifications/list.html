{% extends 'core.html' %}
{% load core i18n %}

{% block htmltitle %}{{ title }} | {{ block.super }}{% endblock %}

{% block headertitle %}{{ title }}{% endblock %}

{% block headernav %}
{% endblock %}

{% block content %}

<div class="notification_list">
    {% if notifs %}
        <ol>
        {% for notification in notifs %}
            <li>
                <a href="{% url 'ecs.notifications.views.view_notification' notification_pk=notification.pk %}">{{ notification.short_name }}</a> f√ºr 
                {% for submission_form in notification.submission_forms.all %}
                    <a href="{% url 'readonly_submission_form' submission_form_pk=submission_form.pk %}">{{ submission_form }}</a>{% if not forloop.last %}, {% endif %}
                {% endfor %}
                vom {{ notification.timestamp|date:'d.m.Y' }}
            </li>
        {% endfor %}
        </ol>
    {% else %}
        <em>{% trans 'There are no notifications yet.' %}</em>
    {% endif %}
</div>

{% if stashed_notifications %}
<div class="notification_list">
  <h4>Nicht eingereichte Meldungen</h4>
  {% include 'notifications/stashed_notification_list.html' %}
</div>
{% endif %}

{% endblock %}

{% block jsbottom %}
    {{ block.super }}
    <script type="text/javascript">
        $(function(){
            $('a.delete_docstash').click(function(ev) {
                ev.preventDefault();
                var href = $(this).attr('href');
                ecs.confirm({
                    question: '{% trans 'Do you want to delete the notification draft?' %}',
                    ok: '{{ _("Delete")|escapejs }}',
                    cancel: '{{ _("Don't Delete")|escapejs }}',
                    success: function() {
                        window.location.href = href;
                    }
                });
            });
        });
    </script>
{% endblock %}

{% block menuSelection %}notifications{% endblock %}
