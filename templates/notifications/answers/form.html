{% extends 'notifications/answers/base.html' %}
{% load core i18n userutils %}

{% block notification_answer_body %}

<form action="" method="post" enctype="multipart/form-data" class="form_main{% if form.bound_to_task %} bound_to_task{% endif %}">
    {% csrf_token %}
    <ol>
    {% for field in form %}
        {% include 'forms/field.html' %}
    {% endfor %}
    </ol>
    {% if not form.bound_to_task %}
        <input type="submit" value="Speichern" />
    {% endif %}
</form>

{% endblock %}

{% block jsbottom %}
    {{ block.super }}
    <script type="text/javascript"> 
        jQuery(function(){
            ecs.setupFormFieldHelpers();
            var textarea = $('id_text');
            var toolbar_items = [ecs.textarea.toolbarItems.boilerplate("{% trans 'Insert Boilerplate' %}", "{% url 'ecs.boilerplate.views.select_boilerplate' %}")];
            {% if answer and user|has_flag:'is_internal' %}
            toolbar_items.unshift(ecs.textarea.toolbarItems.versionHistory("{% trans 'History' %} ({{ answer_version }})", "{% url 'ecs.core.views.fieldhistory.field_history' model_name='notification_answer' pk=answer.pk %}"));
            {% endif %}
            ecs.textarea.installToolbar(textarea, toolbar_items);
        });
    </script>
{% endblock %}

