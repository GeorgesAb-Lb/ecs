<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en">

{% load pdfviewer %}

{% url pdf_show id page|add:-1 as pv_url_prev %}
{% url pdf_show id page|add:1 as pv_url_next %}
{% url pdf_show id 1 as pv_url_first %}
{% url pdf_show id pages as pv_url_last %}

<head>
  <link rel="stylesheet" type="text/css" href="{{ MEDIA_URL }}pdfviewer/css/pdfviewer.css" />
  <title>ECS PDF Viewer: {{ id }}, Seite {{ page }}</title>
</head>

<body>

<div class="pv">

  <div class="pv_main" style="">
    <div class="pv_header" style="">
      <span class="pv_title">{{ id }}, Seite {{ page }} ({{ pages }} Seiten)</span>
    </div>
    <div class="pv_pages">
      <ol>
      {% if page|greater:1 %}
        <li><span class="pv_nav_prev"><a href="{{ pv_url_prev }}"><img src="{{ MEDIA_URL }}pdfviewer/images/arrow_left.png" alt="vorherige Seite" /></a></span></li>
      {% endif %}
        <li>
          <ol>
          {% for image in images %}
            <li><span class="pv_page{% ifequal image.page page %} pv_page_selected{% endifequal %}"><img src="{{ image.url }}" style="height: 1076px; width: 760px;" alt="Seite {{ image.page }} von {{ pages }}" /></span></li>
          {% endfor %}
          </ol>
        </li>
      {% if page|less:pages %}
        <li><span class="pv_nav_next"><a href="{{ pv_url_next}}"><img src="{{ MEDIA_URL }}pdfviewer/images/arrow_right.png" alt="nächste Seite" /></a></span></li>
      {% endif %}
      </ol>
    </div>
  </div>

  <div class="pv_sidebar">
    <div class="pv_controls">
      <ol>
      {% if page|greater:1 %}
        <li><span class="pv_nav_prev"><a href="{{ pv_url_prev }}"><img src="{{ MEDIA_URL }}pdfviewer/images/arrow_left.png" alt="vorherige Seite" /></a></span></li>
      {% endif %}
        <li>normal view</li>
        <li>overview 3x3</li>
        <li>overview 5x5</li>
      {% if page|less:pages %}
        <li><span class="pv_nav_next"><a href="{{ pv_url_next }}"><img src="{{ MEDIA_URL }}pdfviewer/images/arrow_right.png" alt="nächste Seite" /></a></span></li>
      {% endif %}
      </ol>
    </div>
    <div class="pv_thumbs" style="">
      <ol>
      {% for thumb in thumbs %}
        <li><span class="pv_thumb{% ifequal thumb.page page %} pv_thumb_selected{% endifequal %}">{{ thumb.page }}<a href="{% url pdf_show id thumb.page %}"><img src="{{ thumb.url }}" style="height: 108px; width: 76px;" alt="Seite {{ thumb.page }} von {{ pages }}" /></a></span></li>
      {% endfor %}
      </ol>
    </div>
  </div>

</div>

<script type="text/javascript" src="{{ MEDIA_URL }}js/mootools-1.2.4-core.js"></script>
<script type="text/javascript">
  var go_url_prev = function () {
  {% if page|greater:1 %}
    window.location.href = '{{ pv_url_prev }}';
  {% endif %}
  };

  var go_url_next = function () {
  {% if page|less:pages %}
    window.location.href = '{{ pv_url_next }}';
  {% endif %}
  };

  var go_url_first = function () {
    window.location.href = '{{ pv_url_first }}';
  };

  var go_url_last = function () {
    window.location.href = '{{ pv_url_last }}';
  };

  window.addEvent('domready', function(){

    $(document.body).getElements('.pv_page').addEvent('click', function(event) {
      event.stop();
      var x = event.client.x;
      var mid_x = 12 + 760 / 2;
      if (x < mid_x) {
        go_url_prev();
        return;
      } else {
        go_url_next();
        return;
      }
    });

    $(document.body).addEvent('mousewheel', function(event) {
      event.stop();
      var wheel = event.wheel;
      alert('mouse wheel: ' + wheel);
    });

    $(document.body).addEvent('contextmenu', function(event) {
      event.stop();
      alert('contextmenu');
    });

   /* works on IE8, but not on firefox, body is probably not good anchor element for the event handler.. */
   $(document.body).addEvent('keydown', function(event) {
     event.stop();
     var code = event.code;
     var key = event.key;
     alert('keydown code: ' + code + ', key: [' + key + ']');
   });

  });
</script>

</body>

</html>
