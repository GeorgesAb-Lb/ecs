<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en">

<head>
  <link rel="stylesheet" type="text/css" href="{{ MEDIA_URL }}pdfviewer/css/pdfviewer.css" />
  <title>ECS PDF Viewer</title>
</head>

<body>

<div class="pv">

  <div class="pv_main" style="">
    <div class="pv_header" style="">
      <span class="pv_title">ID {{ id }}, Seite {{ page }} von {{ pages }}, Zoom {{ zoom }} ({{ zoom_pages }})</span>
      <br/>
      <span id="pv_title" class="pv_title"></span>
    </div>
    <div class="pv_pages">
      <span class="pv_page"><img src="{{ image.url }}" style="height: {{ height }}px; width: {{ width }}px;" alt="Seite {{ page }} von {{ pages }}" /></span>
    </div>
  </div>

</div>

<script type="text/javascript" src="{{ MEDIA_URL }}js/mootools-1.2.4-core.js"></script>

<script type="text/javascript">
  window.addEvent('domready', function(){

    var PdfViewer = new Class({

      initialize: function() {
        this.id = '{{ id }}';
        this.page = {{ page }};
        this.pages = {{ pages }};
        this.zoom = '{{ zoom }}';
        this.zoom_pages = {{ zoom_pages }};
        this.update_title();
        this.images = {% autoescape off %}{{ images }}{% endautoescape %};
        this.show_images();
      },

      update_title: function() {
        var title = $('pv_title');
        var info = 'ID ' + this.id + ', Seite ' + this.page + ' von ' + this.pages + ', Zoom ' + this.zoom + ' (' + this.zoom_pages + ')';
        var title_info = new Element('span', { id: 'pv_title_info', html: info });
        title.grab(title_info);
      },

      show_images: function() {
        for (var zoom in this.images) {
          for (image in this.images[zoom]) {
            alert(zoom + ': ' + image + ': ' + this.images[zoom][image]['url']);
          }
        }
      }    

    });

    var pdf_viewer = new PdfViewer();

  });
</script>

</body>

</html>
